(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{65:function(t,a,s){"use strict";s.r(a);var e=s(0),r=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"mutable-strings"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mutable-strings","aria-hidden":"true"}},[t._v("#")]),t._v(" Mutable Strings")]),s("p",[t._v("Strings can be declared as an array of characters or as a pointer to a character. In either case, a character string literal can be used to initialise the value.")]),s("p",[t._v("String literals are a collection of characters surrounded by double quotes. The terminating ‘\\0’ character is implicit.")]),s("p",[t._v("For a string to be mutable, it must reside in writeable memory, such as the frame of a function or memory that is dynamically allocated by malloc. To make space for a string in a function's stack frame, an array of chars must be declared with sufficient space to hold all of the string's characters plus the null terminator.")]),s("h2",{attrs:{id:"initialise-char-array-string"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#initialise-char-array-string","aria-hidden":"true"}},[t._v("#")]),t._v(" Initialise Char Array String")]),s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("char")]),t._v(" str"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Hello"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("p",[t._v("This is equivalent:")]),s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("char")]),t._v(" str"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{attrs:{class:"token string"}},[t._v("'H'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'e'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'l'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'l'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'o'")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'\\0'")]),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),s("p",[t._v("In both cases, a variable "),s("code",[t._v("str")]),t._v(" is declared, with "),s("code",[t._v("str")]),t._v(" being an array of 6 "),s("code",[t._v("char")]),t._v("s - one char for each letter in the string with one "),s("code",[t._v("char")]),t._v(" for the terminating null character.")]),s("h2",{attrs:{id:"caveats"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#caveats","aria-hidden":"true"}},[t._v("#")]),t._v(" Caveats")]),s("p",[t._v("Though a char array can be declared with an explicit size, there must be enough space allocated for the null terminator. If not enough space is allocated, the string will still be stored in memory - but the null terminator will not be present:")]),s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("char")]),t._v(" str"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token number"}},[t._v("5")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Hello"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v('// Logical enough right? Since "Hello" has 5 letters...')]),t._v("\n")])]),s("p",[t._v("The above example will store the relevant chars as a char array, but it will not be null terminated. It is a valid "),s("strong",[t._v("array of characters")]),t._v(", but it is NOT a valid "),s("strong",[t._v("string")]),t._v(". If you try to use such a variable as a string, trouble will ensue - the array will be accessed past it's bounds, since functions that handle strings generally use the null terminator to indicate the end of the string.")]),s("p",[t._v('Failing to null-terminate a string may not always appear in testing - you might be lucky if the next byte of memory just happens to be a 0 - terminating the string accidentally. While this may seem fortuitous since the programme "works" - it is actually a dangerous sort of problem. The programme may be tested many times without exhibiting any errors - which may be stored up for deployment where differing conditions may cause the programme to crash or produce incorrect results.')]),s("p",[t._v("Use tools such as valgrind which are capable of detecting this sort of error.")]),s("h2",{attrs:{id:"space-requirements"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#space-requirements","aria-hidden":"true"}},[t._v("#")]),t._v(" Space Requirements")]),s("p",[t._v("It is valid to request more space than is required for a string - which may be necessary if you plan to concatenate more characters onto the string.")]),s("pre",{pre:!0,attrs:{class:"language-c"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("char")]),t._v(" str"),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token number"}},[t._v("42")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"Hello"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{attrs:{class:"token comment"}},[t._v("// OK and will be null terminated.")]),t._v("\n")])])])}],!1,null,null,null);a.default=r.exports}}]);